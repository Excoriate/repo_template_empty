---
description: "Automatically maintain repository configuration files (.editorconfig, .gitignore, .gitattributes, repomix.config.json) and execute repomix whenever new technologies are introduced to ensure consistent development environment and up-to-date repository analysis."
globs: [""]
alwaysApply: true
---

# Repository Context Updates Rule

## Description

This rule ensures automatic maintenance and synchronization of critical repository configuration files whenever new technologies, frameworks, libraries, or development tools are introduced to the project. It enforces consistent development environments across team members and maintains up-to-date repository analysis through automated repomix execution.

## Rule

1. **Technology Detection**: Monitor all file additions, modifications, and new dependencies for technology introductions including:
   - New package dependencies (package.json, requirements.txt, Gemfile, etc.)
   - New configuration files for frameworks or tools
   - New development tools or build systems
   - New language additions to the codebase

2. **Configuration File Updates**: Immediately update repository configuration files when new technologies are detected:
   - Update `.editorconfig` with appropriate settings for new file types
   - Add relevant patterns to `.gitignore` for new technology artifacts
   - Configure `.gitattributes` for new file type handling (line endings, diffs, linguist settings)
   - Modify `repomix.config.json` to include/exclude new file patterns appropriately
   - Update `.npmignore` with appropriate exclusions for NPM package distribution
   - Update `.dockerignore` with build context exclusions for new file types

3. **Repomix Execution**: Execute `repomix` command after configuration updates to regenerate repository analysis and ensure AI tools have current codebase understanding

4. **Validation**: Verify all configuration files use correct syntax and maintain consistency with project standards

5. **Documentation Updates**: Update relevant documentation to reflect new technology integrations and configuration changes

## Implementation

**Cursor IDE Integration:**
- This rule applies globally (`alwaysApply: true`) to ensure continuous monitoring
- Triggers on any file system changes that indicate new technology adoption
- Integrates with Cursor's file watching capabilities to detect relevant changes
- Provides real-time suggestions for configuration updates
- Automatically suggests repomix execution when significant changes are detected

**Technical Enforcement:**
- Scans for new package.json dependencies, requirements.txt entries, Gemfile additions
- Monitors new configuration file patterns (e.g., .babelrc, webpack.config.js, tsconfig.json)
- Detects new file extensions and language additions
- Provides contextual configuration suggestions based on detected technologies
- Validates configuration file syntax before applying changes

## Benefits

1. **Consistency**: Maintains uniform development environment configuration across all team members
2. **Automation**: Eliminates manual configuration management overhead when adopting new technologies
3. **Currency**: Keeps repository analysis up-to-date through automatic repomix execution
4. **Quality**: Prevents configuration drift and ensures proper file handling for all technologies
5. **Efficiency**: Reduces setup time for new team members and development environments
6. **Integration**: Seamlessly incorporates new tools without breaking existing workflows

## Examples

### âœ… Correct Implementation

**Scenario**: Adding TypeScript to a JavaScript project

```
Repository Changes:
â”œâ”€â”€ package.json (+ typescript, @types/node)
â”œâ”€â”€ tsconfig.json (new file)
â””â”€â”€ src/
    â””â”€â”€ index.ts (new file)

Automated Configuration Updates:
â”œâ”€â”€ .editorconfig
â”‚   â””â”€â”€ + [*.ts]
â”‚       â””â”€â”€ + indent_style = space
â”‚       â””â”€â”€ + indent_size = 2
â”œâ”€â”€ .gitignore
â”‚   â””â”€â”€ + *.tsbuildinfo
â”‚   â””â”€â”€ + dist/
â”œâ”€â”€ .gitattributes
â”‚   â””â”€â”€ + *.ts linguist-language=TypeScript
â”‚   â””â”€â”€ + *.ts diff=typescript
â”œâ”€â”€ .npmignore
â”‚   â””â”€â”€ + *.tsbuildinfo
â”‚   â””â”€â”€ + src/**/*.ts (source files)
â”œâ”€â”€ .dockerignore
â”‚   â””â”€â”€ + *.tsbuildinfo
â”‚   â””â”€â”€ + tsconfig.json
â””â”€â”€ repomix.config.json
    â””â”€â”€ include: ["**/*.ts", "**/*.tsx"]
    â””â”€â”€ Execute: repomix
```

**Directory Structure Visualization:**
```
project/
â”œâ”€â”€ .editorconfig          âœ… Updated with TypeScript settings
â”œâ”€â”€ .gitignore            âœ… Updated with TS build artifacts
â”œâ”€â”€ .gitattributes        âœ… Updated with TS file handling
â”œâ”€â”€ .npmignore            âœ… Updated with TS exclusions
â”œâ”€â”€ .dockerignore         âœ… Updated with TS build exclusions
â”œâ”€â”€ repomix.config.json   âœ… Updated to include TS files
â”œâ”€â”€ repomix-output.xml    âœ… Regenerated with new analysis
â””â”€â”€ src/
    â”œâ”€â”€ index.js
    â””â”€â”€ index.ts          âœ… New TypeScript file
```

### âŒ Incorrect Implementation

**Scenario**: Adding TypeScript without configuration updates

```
Repository Changes:
â”œâ”€â”€ package.json (+ typescript)
â”œâ”€â”€ tsconfig.json (new file)
â””â”€â”€ src/
    â””â”€â”€ index.ts (new file)

Missing Configuration Updates:
â”œâ”€â”€ .editorconfig         âŒ No TypeScript-specific settings
â”œâ”€â”€ .gitignore           âŒ Missing *.tsbuildinfo, dist/
â”œâ”€â”€ .gitattributes       âŒ No TypeScript file handling
â”œâ”€â”€ .npmignore           âŒ No TS build artifact exclusions
â”œâ”€â”€ .dockerignore        âŒ No TS development file exclusions
â”œâ”€â”€ repomix.config.json  âŒ TypeScript files not included
â””â”€â”€ repomix-output.xml   âŒ Outdated, missing new files
```

**Problems Created:**
```
Issues/
â”œâ”€â”€ Inconsistent indentation across editors
â”œâ”€â”€ Build artifacts committed to repository
â”œâ”€â”€ Poor diff visualization for TypeScript files
â”œâ”€â”€ Incomplete repository analysis for AI tools
â””â”€â”€ Team members using different configurations
```

### ğŸ”§ Technology-Specific Configuration Examples

**Python Addition:**
```
.editorconfig: [*.py] max_line_length = 88
.gitignore: __pycache__/, *.pyc, .pytest_cache/
.gitattributes: *.py linguist-language=Python
.npmignore: __pycache__/, *.pyc, .pytest_cache/
.dockerignore: __pycache__/, *.pyc, requirements.txt
repomix.config.json: include *.py files
```

**Docker Addition:**
```
.editorconfig: [Dockerfile*] indent_style = tab
.gitignore: docker-compose.override.yml
.gitattributes: Dockerfile* linguist-language=Dockerfile
.npmignore: Dockerfile*, docker-compose*.yml
.dockerignore: create/update with appropriate exclusions
repomix.config.json: include Dockerfile patterns
```

**React Addition:**
```
.editorconfig: [*.jsx,*.tsx] indent_size = 2
.gitignore: build/, .env.local, .parcel-cache/
.gitattributes: *.jsx linguist-language=JavaScript
.npmignore: src/**/*.jsx (source files)
.dockerignore: .env.local, build/, node_modules/
repomix.config.json: include React file patterns
```
